<html>
<head>
<title>Jing's Game</title>
<style>
	* { margin: 0; padding: 0;}

	body, html { height:100%; }

	#myCanvas {
		display: block;
    	margin-left: auto;
    	margin-right: auto;
    	margin-top: 50;
    	background-color: #bebebe;
	}
</style>
</head>
<body>

<canvas id="myCanvas" width="500" height="500"></canvas>
<script type="text/javascript">
	var canvas = document.getElementById("myCanvas");
	var context = canvas.getContext("2d");

	var width = Number(canvas.getAttribute("width"));
	var height = Number(canvas.getAttribute("height"));

	var logoImage = new Image();
	var playImage = new Image();
	var helpImage = new Image();
	var grassImage = new Image();
	var catImageRt = new Image();
	var cattwoImageRt = new Image();
	var catthreeImageRt = new Image();
	var catstandImage = new Image();
	var catImageLft = new Image();
	var cattwoImageLft = new Image();
	var catthreeImageLft = new Image();
	var catRtArray = [catImageRt, cattwoImageRt, catthreeImageRt, catstandImage];
	var catLftArray = [catImageLft, cattwoImageLft, catthreeImageLft, catstandImage];
	var dirCatArray;

	var whatKey;

	var manPos = 225;
	var isMoving = false;
	var currDir;
	var DIR = {
		LEFT: "left",
		RIGHT: "right",
	};

	logoImage.src = "Images/logo.png";
	logoImage.onload = function(){
		context.drawImage(logoImage, 100, 0);
	};
	playImage.src = "Images/play.png";
	playImage.onload = function(){
		context.drawImage(playImage, (width-playImage.width)/2, 200);
	};
	helpImage.src = "Images/help.png";
	helpImage.onload = function(){
		context.drawImage(helpImage, (width-helpImage.width)/2, 275);
	};
	grassImage.src = "Images/grass.png";
	grassImage.onload = function(){
		context.drawImage(grassImage, 0, height-grassImage.height);
	};
	catstandImage.src = "Images/catstand.png";
	catstandImage.onload = function(){
		context.drawImage(catstandImage, (width-catstandImage.width)/2, height-115);
	};

	catImageRt.src = "Images/catbackrt.png";
	cattwoImageRt.src = "Images/catoutrt.png";
	catthreeImageRt.src = "Images/catfrontrt.png";
	catImageLft.src = "Images/catbacklft.png";
	cattwoImageLft.src = "Images/catoutlft.png";
	catthreeImageLft.src = "Images/catfrontlft.png";

	setInterval(update, 1000/24);
	timer = 1;

	document.addEventListener("keydown", keyDownHandler, false);
	document.addEventListener("keyup", keyUpHandler, false);

	function keyDownHandler(event){
		whatKey = event.which;

		if(whatKey == 37){
			manPos = manPos - 5;
			isMoving = true;
			currDir = DIR.LEFT;
			if (manPos < width-width)
				manPos = manPos + 5;
		}

		if(whatKey == 39){ 
			manPos = manPos + 5;
			isMoving = true;
			currDir = DIR.RIGHT;
			if (manPos > width-catstandImage.width)
				manPos = manPos - 5;
		}

		event.preventDefault();
	};

	function keyUpHandler(event){
		whatKey = event.which	

		if(whatKey == 37 || whatKey == 39){
			isMoving = false;
		}
	};

	function update(){
		clear();
		draw();
		timer++;
	};

	function clear(){
		context.clearRect(0,0,500,500);
	};

	function draw(){
		if (currDir == DIR.LEFT){
			dirCatArray = catLftArray;
		}else {
			dirCatArray = catRtArray;
		}

		//for (var i=0; i<dirCatArray.length-1; i++){
			context.drawImage(logoImage, 100, 25);
			context.drawImage(playImage, (width-playImage.width)/2, 200);
			context.drawImage(helpImage, (width-helpImage.width)/2, 260);
			context.drawImage(grassImage, 0, height-grassImage.height);
			if(timer % 3 == 1 && isMoving == true)
				context.drawImage(dirCatArray[2], manPos, height-115);  
			else if(timer % 3 == 2 && isMoving == true)
				context.drawImage(dirCatArray[1], manPos, height-115);  
			else if(timer % 3 == 0 && isMoving == true)
				context.drawImage(dirCatArray[0], manPos, height-115);
			else if(isMoving == false)
				context.drawImage(dirCatArray[3], manPos, height-115);
		//}
	};

</script>

</body>
</html>